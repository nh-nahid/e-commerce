(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))h(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&h(p)}).observe(document,{childList:!0,subtree:!0});function u(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function h(c){if(c.ep)return;c.ep=!0;const f=u(c);fetch(c.href,f)}})();function _t(){return!!JSON.parse(localStorage.getItem("user"))?.accessToken}function xt(o,s,u){return s=parseFloat(s),u=parseFloat(u),o=parseFloat(o),o>=s&&o<=u}const wt=async()=>{if(!Array.isArray(window.allProductsData)){const s=await(await fetch("../products.json")).json();window.allProductsData=s}return allProductsData},vt=async o=>(await wt()).find(h=>{if(h.id===Number(o))return h}),gt=(o,s)=>o>s?s:o,yt=()=>(JSON.parse(localStorage.getItem("dom-commerce-cart-product"))??[])?.map(s=>s.productId),A=async()=>{const o=JSON.parse(localStorage.getItem("dom-commerce-cart-product"))??[],s=yt();if(s===void 0)return{totalPrice:0,totalCartItem:0};const u=s.map(c=>new Promise(async f=>{const p=await vt(c),_=o.find(C=>C.productId===c).productQuantity;f(gt(Number(p.price),Number(p.salePrice))*_)}));return{totalPrice:await new Promise(c=>{Promise.all(u).then(f=>{const p=f.reduce((_,C)=>_+C,0);c(p)})}),totalCartItem:u.length}},Mt=String.raw;var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tt(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var K={exports:{}};(function(o,s){(function(){var u,h,c,f,p,_,C,Z,tt,et,rt,x,S,nt,ot,F,it,w,R,at,P,H,$,k,L,B,U,st,j,J,ct,ut,dt=[].slice;it='<span class="odometer-value"></span>',nt='<span class="odometer-ribbon"><span class="odometer-ribbon-inner">'+it+"</span></span>",f='<span class="odometer-digit"><span class="odometer-digit-spacer">8</span><span class="odometer-digit-inner">'+nt+"</span></span>",C='<span class="odometer-formatting-mark"></span>',c="(,ddd).dd",Z=/^\(?([^)]*)\)?(?:(.)(d+))?$/,tt=30,_=2e3,u=20,et=2,p=.5,rt=1e3/tt,h=1e3/u,ot="transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",L=document.createElement("div").style,F=L.transition!=null||L.webkitTransition!=null||L.mozTransition!=null||L.oTransition!=null,$=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,x=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,R=function(r){var t;return t=document.createElement("div"),t.innerHTML=r,t.children[0]},H=function(r,t){return r.className=r.className.replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," ")},w=function(r,t){return H(r,t),r.className+=" "+t},B=function(r,t){var e;if(document.createEvent!=null)return e=document.createEvent("HTMLEvents"),e.initEvent(t,!0,!0),r.dispatchEvent(e)},P=function(){var r,t;return(r=(t=window.performance)!=null&&typeof t.now=="function"?t.now():void 0)!=null?r:+new Date},k=function(r,t){return t==null&&(t=0),t?(r*=Math.pow(10,t),r+=.5,r=Math.floor(r),r/=Math.pow(10,t)):Math.round(r)},U=function(r){return r<0?Math.ceil(r):Math.floor(r)},at=function(r){return r-k(r)},j=!1,(st=function(){var r,t,e,n,a;if(!j&&window.jQuery!=null){for(j=!0,n=["html","text"],a=[],t=0,e=n.length;t<e;t++)r=n[t],a.push(function(i){var d;return d=window.jQuery.fn[i],window.jQuery.fn[i]=function(l){var m;return l==null||((m=this[0])!=null?m.odometer:void 0)==null?d.apply(this,arguments):this[0].odometer.update(l)}}(r));return a}})(),setTimeout(st,0),S=function(){function r(t){var e,n,a,i,d,l,m,y,M,v=this;if(this.options=t,this.el=this.options.el,this.el.odometer!=null)return this.el.odometer;this.el.odometer=this,m=r.options;for(e in m)a=m[e],this.options[e]==null&&(this.options[e]=a);(i=this.options).duration==null&&(i.duration=_),this.MAX_VALUES=this.options.duration/rt/et|0,this.resetFormat(),this.value=this.cleanValue((y=this.options.value)!=null?y:""),this.renderInside(),this.render();try{for(M=["innerHTML","innerText","textContent"],d=0,l=M.length;d<l;d++)n=M[d],this.el[n]!=null&&function(g){return Object.defineProperty(v.el,g,{get:function(){var b;return g==="innerHTML"?v.inside.outerHTML:(b=v.inside.innerText)!=null?b:v.inside.textContent},set:function(b){return v.update(b)}})}(n)}catch{this.watchForMutations()}}return r.prototype.renderInside=function(){return this.inside=document.createElement("div"),this.inside.className="odometer-inside",this.el.innerHTML="",this.el.appendChild(this.inside)},r.prototype.watchForMutations=function(){var t=this;if(x!=null)try{return this.observer==null&&(this.observer=new x(function(e){var n;return n=t.el.innerText,t.renderInside(),t.render(t.value),t.update(n)})),this.watchMutations=!0,this.startWatchingMutations()}catch{}},r.prototype.startWatchingMutations=function(){if(this.watchMutations)return this.observer.observe(this.el,{childList:!0})},r.prototype.stopWatchingMutations=function(){var t;return(t=this.observer)!=null?t.disconnect():void 0},r.prototype.cleanValue=function(t){var e;return typeof t=="string"&&(t=t.replace((e=this.format.radix)!=null?e:".","<radix>"),t=t.replace(/[.,]/g,""),t=t.replace("<radix>","."),t=parseFloat(t,10)||0),k(t,this.format.precision)},r.prototype.bindTransitionEnd=function(){var t,e,n,a,i,d,l=this;if(!this.transitionEndBound){for(this.transitionEndBound=!0,e=!1,i=ot.split(" "),d=[],n=0,a=i.length;n<a;n++)t=i[n],d.push(this.el.addEventListener(t,function(){return e||(e=!0,setTimeout(function(){return l.render(),e=!1,B(l.el,"odometerdone")},0)),!0},!1));return d}},r.prototype.resetFormat=function(){var t,e,n,a,i,d,l,m;if(t=(l=this.options.format)!=null?l:c,t||(t="d"),n=Z.exec(t),!n)throw new Error("Odometer: Unparsable digit format");return m=n.slice(1,4),d=m[0],i=m[1],e=m[2],a=e?.length||0,this.format={repeating:d,radix:i,precision:a}},r.prototype.render=function(t){var e,n,a,i,d,l,m;for(t==null&&(t=this.value),this.stopWatchingMutations(),this.resetFormat(),this.inside.innerHTML="",d=this.options.theme,e=this.el.className.split(" "),i=[],l=0,m=e.length;l<m;l++)if(n=e[l],!!n.length){if(a=/^odometer-theme-(.+)$/.exec(n)){d=a[1];continue}/^odometer(-|$)/.test(n)||i.push(n)}return i.push("odometer"),F||i.push("odometer-no-transitions"),d?i.push("odometer-theme-"+d):i.push("odometer-auto-theme"),this.el.className=i.join(" "),this.ribbons={},this.formatDigits(t),this.startWatchingMutations()},r.prototype.formatDigits=function(t){var e,n,a,i,d,l,m,y,M,v;if(this.digits=[],this.options.formatFunction)for(a=this.options.formatFunction(t),M=a.split("").reverse(),d=0,m=M.length;d<m;d++)n=M[d],n.match(/0-9/)?(e=this.renderDigit(),e.querySelector(".odometer-value").innerHTML=n,this.digits.push(e),this.insertDigit(e)):this.addSpacer(n);else for(i=!this.format.precision||!at(t)||!1,v=t.toString().split("").reverse(),l=0,y=v.length;l<y;l++)e=v[l],e==="."&&(i=!0),this.addDigit(e,i)},r.prototype.update=function(t){var e,n=this;if(t=this.cleanValue(t),!!(e=t-this.value))return H(this.el,"odometer-animating-up odometer-animating-down odometer-animating"),e>0?w(this.el,"odometer-animating-up"):w(this.el,"odometer-animating-down"),this.stopWatchingMutations(),this.animate(t),this.startWatchingMutations(),setTimeout(function(){return n.el.offsetHeight,w(n.el,"odometer-animating")},0),this.value=t},r.prototype.renderDigit=function(){return R(f)},r.prototype.insertDigit=function(t,e){return e!=null?this.inside.insertBefore(t,e):this.inside.children.length?this.inside.insertBefore(t,this.inside.children[0]):this.inside.appendChild(t)},r.prototype.addSpacer=function(t,e,n){var a;return a=R(C),a.innerHTML=t,n&&w(a,n),this.insertDigit(a,e)},r.prototype.addDigit=function(t,e){var n,a,i,d;if(e==null&&(e=!0),t==="-")return this.addSpacer(t,null,"odometer-negation-mark");if(t===".")return this.addSpacer((d=this.format.radix)!=null?d:".",null,"odometer-radix-mark");if(e)for(i=!1;;){if(!this.format.repeating.length){if(i)throw new Error("Bad odometer format without digits");this.resetFormat(),i=!0}if(n=this.format.repeating[this.format.repeating.length-1],this.format.repeating=this.format.repeating.substring(0,this.format.repeating.length-1),n==="d")break;this.addSpacer(n)}return a=this.renderDigit(),a.querySelector(".odometer-value").innerHTML=t,this.digits.push(a),this.insertDigit(a)},r.prototype.animate=function(t){return!F||this.options.animation==="count"?this.animateCount(t):this.animateSlide(t)},r.prototype.animateCount=function(t){var e,n,a,i,d,l=this;if(n=+t-this.value)return i=a=P(),e=this.value,(d=function(){var m,y,M;if(P()-i>l.options.duration){l.value=t,l.render(),B(l.el,"odometerdone");return}return m=P()-a,m>h&&(a=P(),M=m/l.options.duration,y=n*M,e+=y,l.render(Math.round(e))),$!=null?$(d):setTimeout(d,h)})()},r.prototype.getDigitCount=function(){var t,e,n,a,i,d;for(a=1<=arguments.length?dt.call(arguments,0):[],t=i=0,d=a.length;i<d;t=++i)n=a[t],a[t]=Math.abs(n);return e=Math.max.apply(Math,a),Math.ceil(Math.log(e+1)/Math.log(10))},r.prototype.getFractionalDigitCount=function(){var t,e,n,a,i,d,l;for(i=1<=arguments.length?dt.call(arguments,0):[],e=/^\-?\d*\.(\d*?)0*$/,t=d=0,l=i.length;d<l;t=++d)a=i[t],i[t]=a.toString(),n=e.exec(i[t]),n==null?i[t]=0:i[t]=n[1].length;return Math.max.apply(Math,i)},r.prototype.resetDigits=function(){return this.digits=[],this.ribbons=[],this.inside.innerHTML="",this.resetFormat()},r.prototype.animateSlide=function(t){var e,n,a,i,d,l,m,y,M,v,g,b,O,N,E,T,I,lt,q,Q,W,ft,mt,ht,z,G,X;if(T=this.value,y=this.getFractionalDigitCount(T,t),y&&(t=t*Math.pow(10,y),T=T*Math.pow(10,y)),!!(a=t-T)){for(this.bindTransitionEnd(),i=this.getDigitCount(T,t),d=[],e=0,g=q=0;0<=i?q<i:q>i;g=0<=i?++q:--q){if(I=U(T/Math.pow(10,i-g-1)),m=U(t/Math.pow(10,i-g-1)),l=m-I,Math.abs(l)>this.MAX_VALUES){for(v=[],b=l/(this.MAX_VALUES+this.MAX_VALUES*e*p),n=I;l>0&&n<m||l<0&&n>m;)v.push(Math.round(n)),n+=b;v[v.length-1]!==m&&v.push(m),e++}else v=function(){X=[];for(var D=I;I<=m?D<=m:D>=m;I<=m?D++:D--)X.push(D);return X}.apply(this);for(g=Q=0,ft=v.length;Q<ft;g=++Q)M=v[g],v[g]=Math.abs(M%10);d.push(v)}for(this.resetDigits(),G=d.reverse(),g=W=0,mt=G.length;W<mt;g=++W)for(v=G[g],this.digits[g]||this.addDigit(" ",g>=y),(lt=this.ribbons)[g]==null&&(lt[g]=this.digits[g].querySelector(".odometer-ribbon-inner")),this.ribbons[g].innerHTML="",a<0&&(v=v.reverse()),O=z=0,ht=v.length;z<ht;O=++z)M=v[O],E=document.createElement("div"),E.className="odometer-value",E.innerHTML=M,this.ribbons[g].appendChild(E),O===v.length-1&&w(E,"odometer-last-value"),O===0&&w(E,"odometer-first-value");if(I<0&&this.addDigit("-"),N=this.inside.querySelector(".odometer-radix-mark"),N?.parent.removeChild(N),y)return this.addSpacer(this.format.radix,this.digits[y-1],"odometer-radix-mark")}},r}(),S.options=(ct=window.odometerOptions)!=null?ct:{},setTimeout(function(){var r,t,e,n,a;if(window.odometerOptions){n=window.odometerOptions,a=[];for(r in n)t=n[r],a.push((e=S.options)[r]!=null?(e=S.options)[r]:e[r]=t);return a}},0),S.init=function(){var r,t,e,n,a,i;if(document.querySelectorAll!=null){for(t=document.querySelectorAll(S.options.selector||".odometer"),i=[],e=0,n=t.length;e<n;e++)r=t[e],i.push(r.odometer=new S({el:r,value:(a=r.innerText)!=null?a:r.textContent}));return i}},((ut=document.documentElement)!=null?ut.doScroll:void 0)!=null&&document.createEventObject!=null?(J=document.onreadystatechange,document.onreadystatechange=function(){return document.readyState==="complete"&&S.options.auto!==!1&&S.init(),J?.apply(this,arguments)}):document.addEventListener("DOMContentLoaded",function(){if(S.options.auto!==!1)return S.init()},!1),s!==null?o.exports=S:window.Odometer=S}).call(bt)})(K,K.exports);var It=K.exports;const Ct=Tt(It),Et=async(o,s)=>{const u=JSON.parse(localStorage.getItem("dom-commerce-cart-product"))??[],h=u.find(_=>_.productId===o);h!==void 0?h.productQuantity=s:u.push({productId:o,productQuantity:s}),localStorage.setItem("dom-commerce-cart-product",JSON.stringify(u));const c=document.querySelector(".priceMeterSubtotal"),f=document.querySelector(".priceMeterItemNumber"),p=await A();c.innerHTML=p.totalPrice,f.innerText=p.totalCartItem},Pt=o=>{const s=JSON.parse(localStorage.getItem("dom-commerce-cart-product"))??[],u=s.findIndex(h=>Number(h.productId)===Number(o));return u!==-1?(s.splice(u,1),localStorage.setItem("dom-commerce-cart-product",JSON.stringify(s)),!0):!1},Ft=()=>{const o=document.querySelector("#cart"),s=o.dataset.productId;o.addEventListener("click",()=>{const u=document.querySelector("#quantity").value;Et(s,u).then(()=>{Y(),o.innerText="Added to cart",o.style.backgroundColor="grey"})})},Lt=()=>{const o=document.querySelector(".priceMeterSubtotal"),s=document.querySelector(".priceMeterItemNumber");A().then(u=>{o.innerHTML=u.totalPrice,s.innerText=u.totalCartItem})},pt=(o,s)=>{const u=JSON.parse(localStorage.getItem("dom-commerce-cart-product")),h=u.findIndex(c=>Number(c.productId)===Number(o));u[h].productQuantity=s,localStorage.setItem("dom-commerce-cart-product",JSON.stringify(u));try{Lt()}catch(c){console.log(c)}},St=()=>{const o=document.querySelector(".off-canvas"),s=document.querySelector(".off-canvas-overlay");o.classList.add("show-off-canvas"),s.classList.add("show-off-canvas-overlay")},Ot=()=>{const o=document.querySelector(".off-canvas"),s=document.querySelector(".off-canvas-overlay");o.classList.remove("show-off-canvas"),s.classList.remove("show-off-canvas-overlay"),document.querySelector(".close-icon").addEventListener("click",function(h){h.preventDefault(),s.classList.remove("show-off-canvas-overlay"),o.classList.remove("show-off-canvas")})},qt=()=>{document.querySelector(".off-canvas-overlay").addEventListener("click",function(o){o.preventDefault(),Ot()})};function Dt({imageLink:o,productTilte:s,productCategory:u,productPrice:h,productId:c,quantity:f}){const p=document.querySelector(".cart-product-container");p.innerHTML+=Mt`
    <div class="cart-product">
      <div>
        <img
          src="${o}"
          alt=""
        />
      </div>

      <div class="cart-product-details">
        <div>
          <h4>
            ${s}
          </h4>
        </div>
        <h5>${u}</h5>
        <h5>${h}</h5>
        <div class="off-cart-btn">
          <button data-product-id="${c}" class="off-canvas-btn decrease">-</button>
          <input
            min="1"
            max="10"
            value="${f}"
            type="number"
            class="off-cart-quantity"
          />
          <button data-product-id="${c}" class="off-canvas-btn increase">+</button>
        </div>
      </div>
      <div data-product-id="${c}" class="off-canvas-cart-remove"><i class="fa-solid fa-trash"></i></div>
    </div>
    <hr class="off-canvas-horizontal-line">
  `,V()}const V=async()=>{const o=(await A()).totalPrice,s=20,u=50,h=document.querySelector(".cart-footer");h.innerHTML=Mt`
  <div><h4>SubTotal: $ ${o.toFixed(2)}</h4></div>
  <div><h4>Tax: $ ${s.toFixed(2)}</h4></div>
  <div><h4>Shipping Cost: $ ${u.toFixed(2)}</h4></div>
  <hr>
  <div><h4>Total: $ ${(o+s+u).toFixed(2)}</h4></div>
  <div><a href="../../../pages/checkout.html">Checkout</a></div>
`},Y=()=>{const s=yt().map(u=>new Promise(h=>{vt(u).then(c=>{const f=JSON.parse(localStorage.getItem("dom-commerce-cart-product")).find(p=>Number(p.productId)===Number(u)).productQuantity;h({quantity:Number(f),imageLink:c.image,productCategory:c.category,productTilte:c.title,productPrice:"$ "+gt(c.price,c.salePrice),productId:c.id})})}));Promise.all(s).then(u=>{const h=document.querySelector(".cart-product-container");h.innerHTML="",u.forEach(c=>{Dt(c)})}).finally(()=>{const u=document.querySelectorAll(".off-canvas-btn.increase"),h=document.querySelectorAll(".off-canvas-btn.decrease"),c=document.querySelectorAll(".off-canvas-cart-remove");u.forEach(f=>{f.addEventListener("click",function(){const p=document.querySelector(".off-cart-quantity");p.value=parseInt(p.value)+1,pt(f.dataset.productId,p.value),V()})}),h.forEach(f=>{f.addEventListener("click",function(){const p=document.querySelector(".off-cart-quantity");p.value>1&&(p.value=parseInt(p.value)-1,pt(f.dataset.productId,p.value),V())})}),c.forEach(f=>{f.addEventListener("click",function(){Pt(f.dataset.productId),Y()})})})},Nt=document.querySelector("#login-item");_t()&&(Nt.style.display="none");const At=document.querySelector(".view-cart");At.addEventListener("click",function(o){o.preventDefault(),St()});A().then(o=>{const s=document.createElement("div");s.innerHTML=`
            <div class="priceMeter">
                <div>Item : <span class="priceMeterItemNumber">${o.totalCartItem}</span></div>
                <div>$<span class="priceMeterSubtotal">${o.totalPrice}</span></div>
            </div>
`,document.querySelector("body").append(s),document.querySelector(".priceMeter").addEventListener("click",()=>{St()}),new Ct({el:document.querySelector(".priceMeterSubtotal"),value:o.totalPrice,format:"(,ddd).dd",theme:"default"})});Y();qt();export{xt as a,Ft as c,wt as g,_t as i};
